# Benchmarking scripts

Scripts for benchmarking HDT tools can be found here. 
These scripts are written in Bash and are currently available for benchmarking the following tools:

- rdf2hdt
- hdtCat

The scripts produce various statistics which are retrieved through the GNU [time](https://www.gnu.org/software/time/) 
command. The output of `time` is parsed by `parse_time_log.sh` script which is invoked within the code of the command 
line benchmark tools.   

## Command line benchmark tools

###  `bench_rdf2hdt.sh`

- Script `bench_rdf2hdt.sh` runs `rdf2hdt` upon given files and creates a csv table with several performance
measurements.

```
    Usage: $ bench_rdf2hdt.sh [OPTIONS] FILE...
    Run rdf2hdt with given FILEs and save performance statistics.
        -d, --datadir DIR   DIR directory  where the output will be saved
        -h, --help          display help and exit
        -p,                 run for all FILEs in parallel
        -q, --quiet         quiet/suppress stdout
        -r, --remove        remove output hdt files after each rdf2hdt run
```

Notice that option `-p` runs all the rdf2hdt scripts in parallel which can be faster. However for very large files and 
small memory resource sizes, this can lead to resource starvation rapidly, so consider before using this option.

Option `-r` will remove only the produced HDT files, only after finishing all the rdf2hdt runs.


### `bench_hdtCat.sh`

- Script `bench_hdtCat.sh` runs `hdtCat` upon given files in a sequential or parallel way:
    - _Sequential setting_
        
      Given a sequence of at least two HDT files, the script will generate an HDT file by invoking hdtCat upon the 
      first pair of HDTs. If there is another HDT file, it will invoke hdtCat upon it and the previously generated file.
      The process continues sequentially until there are no more given files.

    - _Parallel setting_
    
      Given a sequence of at least two HDT files, the script will pick up pairs of them and generate merged HDTs, by 
      invoking hdtCat. This process will continue recursively, until the final HDT is produced. If the number of HDTs is
      odd, then one of them is used as an input at a later level of recursion.
      
```
    Usage: $ bench_hdtCat.sh [OPTIONS] FILE...
    Run hdtCat with given FILEs iteratively and save performance statistics.
        -d, --datadir DIR   DIR directory where the output logs will be saved
        -h, --help          display the help and exit
        -p,                 run hdtCat processes in parallel and not sequantially
        -q, --quiet         quiet/suppress stdout
```
 
Sequential setting is set by default. To invoke the parallel setting, run with option `-p`.
 
 
## Output

The output of the scripts consists of:

1. Generated files, such as HDTs from the rdf2hdt or hdtCat tools.
2. Log files with the output of `time` command for each run.
3. A csv table generated by `parse_time_log.sh`. This table contains performance information for each run, such as the
memory peak (Maximum resident size), the wall time, user time etc.

## Notes
- The scripts have been created under Linux environment and are not meant to be used in other platforms.
